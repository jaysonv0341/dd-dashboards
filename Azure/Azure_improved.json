{
  "title":"Azure (Overview - DD Example)",
  "description":"This dashboard provides a high-level view of your Azure stack, displaying key performance and resource metrics for your SQL Databases, VMs, and App Services. Further reading on Azure monitoring:\n\n- [How to monitor Azure SQL Databases with Datadog](https://www.datadoghq.com/blog/monitor-azure-sql-databases-datadog/)\n\n- [How to monitor Azure VMs with Datadog](https://www.datadoghq.com/blog/monitor-azure-vms-using-datadog/)\n\n- [How to monitor Azure App Service applications with Datadog](https://www.datadoghq.com/blog/monitor-azure-app-service-applications-datadog/)\n\n- [Datadogâ€™s Azure integration docs](https://docs.datadoghq.com/integrations/azure/)\n\nClone this template dashboard to make changes and add your own graph widgets.",
  "widgets":[
    {
      "id":0,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.vm.status{$region,$subscription,$tenant,$group,status:running}",
            "aggregator":"last"
          }
        ],
        "title":"Active VMs",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "precision":0,
        "text_align":"center"
      },
      "layout":{
        "x":46,
        "y":0,
        "width":16,
        "height":9
      }
    },
    {
      "id":1,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"avg:azure.vm.processor_total_pct_user_time{$tenant,$subscription,$region,$group}",
            "aggregator":"min"
          }
        ],
        "title":"Min CPU utilization",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":"%",
        "precision":0,
        "text_align":"center"
      },
      "layout":{
        "x":63,
        "y":10,
        "width":16,
        "height":9
      }
    },
    {
      "id":2,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"avg:azure.vm.processor_total_pct_user_time{$tenant,$subscription,$region,$group}",
            "aggregator":"max"
          }
        ],
        "title":"Max CPU utilization",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":"%",
        "precision":0,
        "text_align":"center"
      },
      "layout":{
        "x":63,
        "y":0,
        "width":16,
        "height":9
      }
    },
    {
      "id":3,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.sql_servers_databases.connection_successful{$tenant,$subscription,$region,$group}.as_count()",
            "aggregator":"sum"
          }
        ],
        "title":"Successful connections",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":false,
        "custom_unit":"conns",
        "precision":0,
        "text_align":"center"
      },
      "layout":{
        "x":13,
        "y":21,
        "width":19,
        "height":9
      }
    },
    {
      "id":4,
      "definition":{
        "type":"note",
        "content":"[SQL \nDatabases](https://app.datadoghq.com/screen/integration/93/azure-sql-databases?from_ts=1583512544010&to_ts=1583516144010&live=true)",
        "background_color":"gray",
        "font_size":"18",
        "text_align":"center",
        "show_tick":true,
        "tick_pos":"50%",
        "tick_edge":"right"
      },
      "layout":{
        "x":0,
        "y":21,
        "width":12,
        "height":19
      }
    },
    {
      "id":5,
      "definition":{
        "type":"image",
        "url":"/static/images/saas_logos/bot/azure.png",
        "sizing":"center"
      },
      "layout":{
        "x":0,
        "y":0,
        "width":32,
        "height":19
      }
    },
    {
      "id":6,
      "definition":{
        "type":"note",
        "content":"[VMs](https://app.datadoghq.com/screen/integration/92/azure-vm)",
        "background_color":"gray",
        "font_size":"18",
        "text_align":"center",
        "show_tick":true,
        "tick_pos":"50%",
        "tick_edge":"right"
      },
      "layout":{
        "x":33,
        "y":0,
        "width":12,
        "height":19
      }
    },
    {
      "id":7,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"top(avg:azure.vm.processor_total_pct_user_time{$tenant,$subscription,$region,$group} by {name},10,'mean','desc')",
            "display_type":"line",
            "style":{
              "palette":"warm"
            }
          }
        ],
        "title":"CPU utilization by name",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"4h"
        },
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":80,
        "y":0,
        "width":46,
        "height":19
      }
    },
    {
      "id":8,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"avg:azure.vm.processor_total_pct_user_time{$tenant,$subscription,$region,$group}",
            "aggregator":"avg"
          }
        ],
        "title":"Average CPU utilization",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":"%",
        "precision":0,
        "text_align":"center"
      },
      "layout":{
        "x":46,
        "y":10,
        "width":16,
        "height":9
      }
    },
    {
      "id":9,
      "definition":{
        "type":"note",
        "content":"[EventHub](https://app.datadoghq.com/screen/integration/103/azure-event-hubs)",
        "background_color":"gray",
        "font_size":"18",
        "text_align":"center",
        "show_tick":true,
        "tick_pos":"50%",
        "tick_edge":"right"
      },
      "layout":{
        "x":0,
        "y":42,
        "width":12,
        "height":19
      }
    },
    {
      "id":10,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"sum:azure.eventhub_namespaces.incoming_messages{$region,$tenant,$app} by {name}.as_count()",
            "display_type":"bars",
            "style":{
              "palette":"purple",
              "line_type":"solid",
              "line_width":"normal"
            }
          },
          {
            "q":"-sum:azure.eventhub_namespaces.outgoing_messages{$region,$tenant,$app} by {name}.as_count()",
            "display_type":"bars",
            "style":{
              "palette":"green",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "title":"Messages In/Out",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"4h"
        },
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":33,
        "y":42,
        "width":46,
        "height":19
      }
    },
    {
      "id":11,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"sum:azure.eventhub_namespaces.successful_requests{$region,$tenant,$app} by {name}.as_count()",
            "display_type":"bars",
            "style":{
              "palette":"cool",
              "line_type":"solid",
              "line_width":"normal"
            }
          },
          {
            "q":"sum:azure.eventhub_namespaces.internal_server_errors{$region,$tenant,$app} by {name}.as_count(), sum:azure.eventhub_namespaces.other_errors{$region,$tenant,$app} by {name}.as_count(), sum:azure.eventhub_namespaces.server_busy_errors{$region,$tenant,$app} by {name}.as_count()",
            "display_type":"line",
            "style":{
              "palette":"warm",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "scale":"log",
          "include_zero":false
        },
        "title":"Requests Successful/Error",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"4h"
        },
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":80,
        "y":42,
        "width":46,
        "height":19
      }
    },
    {
      "id":12,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.eventhub_namespaces.incoming_messages{$region,$tenant,$app}.as_rate()+sum:azure.eventhub_namespaces.outgoing_messages{$region,$tenant,$app}.as_count()",
            "aggregator":"avg",
            "conditional_formats":[
              {
                "comparator":"<=",
                "value":0,
                "palette":"white_on_red"
              },
              {
                "comparator":">",
                "value":0,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"Total Messages",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":false,
        "precision":0,
        "text_align":"center"
      },
      "layout":{
        "x":13,
        "y":42,
        "width":19,
        "height":9
      }
    },
    {
      "id":13,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.eventhub_namespaces.successful_requests{$region,$tenant,$app}.as_count()",
            "aggregator":"sum",
            "conditional_formats":[
              {
                "comparator":"<=",
                "value":0,
                "palette":"white_on_red"
              },
              {
                "comparator":">",
                "value":0,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"Successful requests",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":false,
        "custom_unit":" ",
        "precision":0,
        "text_align":"center"
      },
      "layout":{
        "x":13,
        "y":52,
        "width":19,
        "height":9
      }
    },
    {
      "id":14,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.sql_servers_databases.connection_failed{$tenant,$subscription,$group}",
            "aggregator":"sum",
            "conditional_formats":[
              {
                "comparator":">",
                "value":5,
                "palette":"white_on_red"
              }
            ]
          }
        ],
        "title":"Failed connections",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":" "
      },
      "layout":{
        "x":13,
        "y":31,
        "width":19,
        "height":9
      }
    },
    {
      "id":15,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"avg:azure.sql_servers_databases.cpu_percent{$tenant,$subscription,$group} by {name}",
            "display_type":"line",
            "style":{
              "palette":"cool",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "title":"CPU utilization per database",
        "title_size":"16",
        "title_align":"left",
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":33,
        "y":21,
        "width":46,
        "height":19
      }
    },
    {
      "id":16,
      "definition":{
        "type":"toplist",
        "requests":[
          {
            "q":"top(sum:azure.sql_servers_databases.storage{$tenant,$subscription,$group} by {name}, 10, 'mean', 'desc')"
          }
        ],
        "title":"Total storage per database",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":80,
        "y":21,
        "width":46,
        "height":19
      }
    },
    {
      "id":17,
      "definition":{
        "type":"note",
        "content":"[Azure Virtual Networks](https://app.datadoghq.com/screen/integration/30307/azure-virtual-networks)",
        "background_color":"gray",
        "font_size":"18",
        "text_align":"center",
        "show_tick":true,
        "tick_pos":"50%",
        "tick_edge":"right"
      },
      "layout":{
        "x":0,
        "y":63,
        "width":12,
        "height":19
      }
    },
    {
      "id":18,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.usage.current_value{$tenant,$subscription,$region,usage_name:virtualnetworks}",
            "aggregator":"last"
          }
        ],
        "title":"Virtual Networks",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":"",
        "precision":0
      },
      "layout":{
        "x":13,
        "y":63,
        "width":15,
        "height":9
      }
    },
    {
      "id":19,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.network_virtualnetworks.total_subnets{$tenant,$subscription,$region}",
            "aggregator":"last"
          }
        ],
        "title":"Subnets",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":"",
        "precision":0
      },
      "layout":{
        "x":13,
        "y":73,
        "width":15,
        "height":9
      }
    },
    {
      "id":20,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.network_virtualnetworks.total_addresses{$tenant,$subscription,$region}",
            "aggregator":"last",
            "conditional_formats":[
              {
                "comparator":">",
                "value":0,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"Address Space",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":"",
        "precision":0
      },
      "layout":{
        "x":29,
        "y":63,
        "width":15,
        "height":9
      }
    },
    {
      "id":21,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:azure.network_virtualnetworks.available_subnet_addresses{$tenant,$subscription,$region}",
            "aggregator":"last",
            "conditional_formats":[
              {
                "comparator":">",
                "value":0,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"Available Addresses",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"1h"
        },
        "autoscale":true,
        "custom_unit":"",
        "precision":0
      },
      "layout":{
        "x":29,
        "y":73,
        "width":15,
        "height":9
      }
    },
    {
      "id":22,
      "definition":{
        "type":"toplist",
        "requests":[
          {
            "q":"top(avg:azure.network_virtualnetworks.assigned_subnet_addresses{$tenant,$subscription,$region} by {subnet_name,name}*100/(avg:azure.network_virtualnetworks.assigned_subnet_addresses{$tenant,$subscription,$region} by {subnet_name,name}+avg:azure.network_virtualnetworks.available_subnet_addresses{$tenant,$subscription,$region} by {subnet_name,name}),25,'mean','desc')",
            "conditional_formats":[
              {
                "comparator":">",
                "value":0.9,
                "palette":"white_on_red"
              },
              {
                "comparator":">",
                "value":0.75,
                "palette":"white_on_yellow"
              },
              {
                "comparator":"<=",
                "value":0.75,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"[Subnet] Highest Assigned Address Space (%)",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":86,
        "y":63,
        "width":40,
        "height":19
      }
    },
    {
      "id":23,
      "definition":{
        "type":"toplist",
        "requests":[
          {
            "q":"top(avg:azure.network_virtualnetworks.allocated_addresses{$tenant,$subscription,$region} by {name}*100/avg:azure.network_virtualnetworks.total_addresses{$tenant,$subscription,$region} by {name},25,'mean','desc')",
            "conditional_formats":[
              {
                "comparator":">",
                "value":90,
                "palette":"white_on_red"
              },
              {
                "comparator":">",
                "value":75,
                "palette":"white_on_yellow"
              },
              {
                "comparator":"<=",
                "value":75,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"[Network] Highest Allocated Address Space (%)",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":45,
        "y":63,
        "width":40,
        "height":19
      }
    }
  ],
  "template_variables":[
    {
      "name":"tenant",
      "default":"*",
      "prefix":"tenant_name"
    },
    {
      "name":"subscription",
      "default":"*",
      "prefix":"subscription_name"
    },
    {
      "name":"region",
      "default":"*",
      "prefix":"region"
    },
    {
      "name":"group",
      "default":"*",
      "prefix":"resource_group"
    },
    {
      "name":"app",
      "default":"*",
      "prefix":"name"
    }
  ],
  "layout_type":"free",
  "is_read_only":false,
  "notify_list":[

  ],
  "id":"zkc-m55-43s"
}
