{
  "title":"AWS Lambda - (DD Example)",
  "description":"This dashboard reports the performance and usage of your AWS Lambda functions, helping you optimize them and monitor your billable execution time. Further reading on monitoring AWS Lambda:\n\n- [How to monitor Lambda functions](https://www.datadoghq.com/blog/how-to-monitor-lambda-functions/)\n\n- [Datadog's Lambda Layer: Monitor custom serverless metrics](https://www.datadoghq.com/blog/datadog-lambda-layer/)\n\n- [Datadog's AWS Lambda integration docs](https://docs.datadoghq.com/integrations/amazon_lambda/)\n\nClone this template dashboard to make changes and add your own graph widgets.",
  "widgets":[
    {
      "id":0,
      "definition":{
        "type":"image",
        "url":"/static/images/screenboard/integrations/amazon_lambda.svg",
        "sizing":"zoom"
      },
      "layout":{
        "x":0,
        "y":0,
        "width":13,
        "height":14
      }
    },
    {
      "id":1,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"avg:aws.lambda.duration.sum{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}",
            "display_type":"line",
            "style":{
              "palette":"dog_classic",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "title":"Execution duration by function",
        "title_size":"16",
        "title_align":"left",
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":34,
        "y":35,
        "width":33,
        "height":15
      }
    },
    {
      "id":2,
      "definition":{
        "type":"toplist",
        "requests":[
          {
            "q":"top(sum:aws.lambda.invocations{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}.as_count(), 100, 'sum', 'desc')",
            "conditional_formats":[
              {
                "comparator":">",
                "value":0,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"Top invoked functions",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":0,
        "y":35,
        "width":33,
        "height":15
      }
    },
    {
      "id":3,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"avg:aws.lambda.errors{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}.as_count()",
            "display_type":"bars",
            "style":{
              "palette":"warm",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "title":"Errors by function",
        "title_size":"16",
        "title_align":"left",
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":68,
        "y":35,
        "width":35,
        "height":15
      }
    },
    {
      "id":4,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"avg:aws.lambda.throttles{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}.as_count()",
            "display_type":"bars",
            "style":{
              "palette":"orange",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "title":"Throttled invocations by function",
        "title_size":"16",
        "title_align":"left",
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":68,
        "y":50,
        "width":35,
        "height":15
      }
    },
    {
      "id":5,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"sum:aws.lambda.invocations{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}",
            "display_type":"line",
            "style":{
              "palette":"cool",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "title":"Function invocations",
        "title_size":"16",
        "title_align":"left",
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":0,
        "y":20,
        "width":33,
        "height":15
      }
    },
    {
      "id":6,
      "definition":{
        "type":"toplist",
        "requests":[
          {
            "q":"top(sum:aws.lambda.duration{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}, 20, 'mean', 'desc')"
          }
        ],
        "title":"Average execution time by function",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":34,
        "y":20,
        "width":33,
        "height":15
      }
    },
    {
      "id":7,
      "definition":{
        "type":"toplist",
        "requests":[
          {
            "q":"top(avg:aws.lambda.duration.sum{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}, 100, 'sum', 'desc')"
          }
        ],
        "title":"Total execution time",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":34,
        "y":50,
        "width":33,
        "height":15
      }
    },
    {
      "id":8,
      "definition":{
        "type":"toplist",
        "requests":[
          {
            "q":"top(sum:aws.lambda.errors{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}.as_count(), 20, 'sum', 'desc')",
            "conditional_formats":[
              {
                "comparator":">",
                "value":0,
                "palette":"white_on_red"
              }
            ]
          }
        ],
        "title":"Errors",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":68,
        "y":20,
        "width":35,
        "height":15
      }
    },
    {
      "id":9,
      "definition":{
        "type":"note",
        "content":"Total Errors",
        "background_color":"pink",
        "font_size":"18",
        "text_align":"center",
        "show_tick":false,
        "tick_pos":"50%",
        "tick_edge":"bottom"
      },
      "layout":{
        "x":68,
        "y":15,
        "width":35,
        "height":5
      }
    },
    {
      "id":10,
      "definition":{
        "type":"note",
        "content":"Execution time",
        "background_color":"yellow",
        "font_size":"18",
        "text_align":"center",
        "show_tick":false,
        "tick_pos":"50%",
        "tick_edge":"bottom"
      },
      "layout":{
        "x":34,
        "y":15,
        "width":33,
        "height":5
      }
    },
    {
      "id":11,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:aws.lambda.duration.sum{$aws_account,$region,$function,$resource,$executedVersion,$account-name}",
            "aggregator":"sum"
          }
        ],
        "title":"Cumulative execution time",
        "title_size":"16",
        "title_align":"center",
        "autoscale":true,
        "precision":0
      },
      "layout":{
        "x":14,
        "y":0,
        "width":19,
        "height":14
      }
    },
    {
      "id":12,
      "definition":{
        "type":"query_value",
        "requests":[
          {
            "q":"sum:aws.lambda.errors{$aws_account,$region,$function,$resource,$executedVersion,$account-name}.as_count()",
            "aggregator":"sum",
            "conditional_formats":[
              {
                "comparator":">",
                "value":5,
                "palette":"white_on_red"
              },
              {
                "comparator":"<=",
                "value":5,
                "palette":"white_on_green"
              }
            ]
          }
        ],
        "title":"Total Errors Combined",
        "title_size":"16",
        "title_align":"center",
        "autoscale":true,
        "custom_unit":" ",
        "precision":0
      },
      "layout":{
        "x":34,
        "y":0,
        "width":19,
        "height":14
      }
    },
    {
      "id":13,
      "definition":{
        "type":"note",
        "content":"Invocations",
        "background_color":"blue",
        "font_size":"18",
        "text_align":"center",
        "show_tick":false,
        "tick_pos":"50%",
        "tick_edge":"bottom"
      },
      "layout":{
        "x":0,
        "y":15,
        "width":33,
        "height":5
      }
    },
    {
      "id":14,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"avg:aws.lambda.provisioned_concurrency_utilization{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}",
            "display_type":"line",
            "style":{
              "palette":"dog_classic",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "markers":[
          {
            "value":"y = 100",
            "display_type":"warning bold",
            "label":" 100% utilization "
          }
        ],
        "title":"Provisioned concurrency utilization by function",
        "title_size":"16",
        "title_align":"left",
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":0,
        "y":50,
        "width":33,
        "height":15
      }
    },
    {
      "id":15,
      "definition":{
        "type":"query_table",
        "requests":[
          {
            "q":"top(avg:aws.lambda.errors{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}.as_count()/avg:aws.lambda.invocations{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}.as_count(),10,'sum','desc')",
            "aggregator":"avg",
            "limit":10,
            "order":"desc",
            "alias":"Error fraction (1 is max)",
            "conditional_formats":[
              {
                "comparator":">=",
                "value":0.5,
                "palette":"white_on_red"
              }
            ]
          }
        ],
        "title":"Errors Ratio per Function (top 10)",
        "title_size":"16",
        "title_align":"left"
      },
      "layout":{
        "x":68,
        "y":0,
        "width":35,
        "height":14
      }
    },
    {
      "id":16,
      "definition":{
        "type":"note",
        "content":"Poorly Performing Lambda Functions",
        "background_color":"vivid_orange",
        "font_size":"18",
        "text_align":"center",
        "show_tick":true,
        "tick_pos":"50%",
        "tick_edge":"right"
      },
      "layout":{
        "x":54,
        "y":0,
        "width":13,
        "height":14
      }
    },
    {
      "id":17,
      "definition":{
        "type":"timeseries",
        "requests":[
          {
            "q":"count_nonzero(sum:aws.lambda.invocations{$aws_account,$region,$function,$resource,$executedVersion,$account-name} by {functionname}.as_count().rollup(sum, 3600))",
            "display_type":"bars",
            "style":{
              "palette":"dog_classic",
              "line_type":"solid",
              "line_width":"normal"
            }
          }
        ],
        "yaxis":{
          "label":"",
          "scale":"linear",
          "min":"auto",
          "max":"auto",
          "include_zero":true
        },
        "title":"Invoked functions per hour",
        "title_size":"16",
        "title_align":"left",
        "time":{
          "live_span":"2d"
        },
        "show_legend":false,
        "legend_size":"0"
      },
      "layout":{
        "x":0,
        "y":65,
        "width":33,
        "height":15
      }
    }
  ],
  "template_variables":[
    {
      "name":"aws_account",
      "default":"*",
      "prefix":"aws_account"
    },
    {
      "name":"region",
      "default":"*",
      "prefix":"region"
    },
    {
      "name":"function",
      "default":"*",
      "prefix":"functionname"
    },
    {
      "name":"resource",
      "default":"*",
      "prefix":"resource"
    },
    {
      "name":"executedVersion",
      "default":"*",
      "prefix":"executedversion"
    },
    {
      "name":"account-name",
      "default":"*",
      "prefix":"account-name"
    }
  ],
  "layout_type":"free",
  "is_read_only":false,
  "notify_list":[

  ],
  "id":"jqr-fh6-zrq"
}
