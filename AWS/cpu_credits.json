{
   "title":"Low Burst ability (DD Example)",
   "description":"",
   "widgets":[
      {
         "id":0,
         "definition":{
            "type":"toplist",
            "requests":[
               {
                  "q":"top(min:aws.ec2.cpucredit_balance{$AWS_account} by {host,instance-type}, 25, 'mean', 'asc')",
                  "conditional_formats":[
                     {
                        "comparator":"<",
                        "value":20,
                        "palette":"white_on_red"
                     }
                  ],
                  "style":{
                     "palette":"dog_classic"
                  }
               }
            ],
            "title":"EC2 Instance - CPU credit low (bottom 25)",
            "title_size":"16",
            "title_align":"left"
         },
         "layout":{
            "x":1,
            "y":23,
            "width":35,
            "height":40
         }
      },
      {
         "id":1,
         "definition":{
            "type":"toplist",
            "requests":[
               {
                  "q":"top(avg:aws.ec2.cpucredit_usage{$AWS_account} by {host,instance-type}, 25, 'mean', 'desc')",
                  "conditional_formats":[
                     {
                        "comparator":">",
                        "value":1,
                        "palette":"white_on_red"
                     }
                  ],
                  "style":{
                     "palette":"dog_classic"
                  }
               }
            ],
            "title":"EC2 Instance - CPU credit usage increase (top)",
            "title_size":"16",
            "title_align":"left"
         },
         "layout":{
            "x":73,
            "y":23,
            "width":35,
            "height":40
         }
      },
      {
         "id":2,
         "definition":{
            "type":"toplist",
            "requests":[
               {
                  "q":"top(avg:aws.ec2.cpusurplus_credits_charged{$AWS_account} by {host,instance-type}, 25, 'mean', 'desc')",
                  "conditional_formats":[
                     {
                        "comparator":">",
                        "value":1,
                        "palette":"white_on_red"
                     }
                  ],
                  "style":{
                     "palette":"dog_classic"
                  }
               }
            ],
            "title":"EC2 Instance - CPU additional charge (top 25)",
            "title_size":"16",
            "title_align":"left"
         },
         "layout":{
            "x":37,
            "y":23,
            "width":35,
            "height":40
         }
      },
      {
         "id":3,
         "definition":{
            "type":"note",
            "content":"Refer to the AWS documentation regarding CPU credits - [See here](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances-monitoring-cpu-credits.html)\nAnd for CPU Credits and Baseline Performance for Burstable Performance Instances - [See Here](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-credits-baseline-concepts.html)",
            "background_color":"gray",
            "font_size":"14",
            "text_align":"left",
            "show_tick":false,
            "tick_pos":"50%",
            "tick_edge":"left"
         },
         "layout":{
            "x":45,
            "y":0,
            "width":63,
            "height":12
         }
      },
      {
         "id":4,
         "definition":{
            "type":"image",
            "url":"https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Amazon_Web_Services_Logo.svg/2560px-Amazon_Web_Services_Logo.svg.png",
            "sizing":"fit"
         },
         "layout":{
            "x":1,
            "y":0,
            "width":30,
            "height":12
         }
      },
      {
         "id":5,
         "definition":{
            "type":"image",
            "url":"https://www.signalfx.com/wp-content/uploads/EC2-logo-full.jpg",
            "sizing":"zoom"
         },
         "layout":{
            "x":32,
            "y":0,
            "width":12,
            "height":12
         }
      },
      {
         "id":6,
         "definition":{
            "type":"toplist",
            "requests":[
               {
                  "q":"top(min:aws.ec2.cpucredit_balance{$AWS_account} by {owner}, 10, 'mean', 'asc')",
                  "conditional_formats":[
                     {
                        "comparator":"<",
                        "value":20,
                        "palette":"white_on_red"
                     }
                  ]
               }
            ],
            "title":"EC2 Owner - CPU credit low (bottom 10)",
            "title_size":"16",
            "title_align":"left"
         },
         "layout":{
            "x":1,
            "y":64,
            "width":35,
            "height":19
         }
      },
      {
         "id":7,
         "definition":{
            "type":"toplist",
            "requests":[
               {
                  "q":"top(avg:aws.ec2.cpusurplus_credits_charged{$AWS_account} by {owner}, 10, 'mean', 'desc')",
                  "conditional_formats":[
                     {
                        "comparator":"<",
                        "value":20,
                        "palette":"white_on_red"
                     }
                  ]
               }
            ],
            "title":"EC2 Owner - CPU additional charge (top 10)",
            "title_size":"16",
            "title_align":"left"
         },
         "layout":{
            "x":37,
            "y":64,
            "width":35,
            "height":19
         }
      },
      {
         "id":8,
         "definition":{
            "type":"toplist",
            "requests":[
               {
                  "q":"top(avg:aws.ec2.cpucredit_usage{$AWS_account} by {owner}, 10, 'mean', 'desc')",
                  "conditional_formats":[
                     {
                        "comparator":"<",
                        "value":20,
                        "palette":"white_on_red"
                     }
                  ]
               }
            ],
            "title":"EC2 - CPU credit usage (top10 Cost Centers)",
            "title_size":"16",
            "title_align":"left"
         },
         "layout":{
            "x":73,
            "y":64,
            "width":35,
            "height":19
         }
      },
      {
         "id":9,
         "definition":{
            "type":"note",
            "content":"CPU credits that an instance has accrued. This balance is depleted when the CPU bursts and CPU credits are spent more quickly than they are earned.",
            "background_color":"blue",
            "font_size":"14",
            "text_align":"left",
            "show_tick":true,
            "tick_pos":"50%",
            "tick_edge":"bottom"
         },
         "layout":{
            "x":1,
            "y":13,
            "width":35,
            "height":9
         }
      },
      {
         "id":10,
         "definition":{
            "type":"note",
            "content":"The number of surplus CPU credits exceeding the [maximum number of CPU credits](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-credits-baseline-concepts.html#burstable-performance-instances-credit-table) that can be earned in a 24-hour period, and thus attracting an additional charge.",
            "background_color":"blue",
            "font_size":"14",
            "text_align":"left",
            "show_tick":true,
            "tick_pos":"50%",
            "tick_edge":"bottom"
         },
         "layout":{
            "x":37,
            "y":13,
            "width":35,
            "height":9
         }
      },
      {
         "id":11,
         "definition":{
            "type":"note",
            "content":"The number of CPU credits spent by the instance for CPU utilization. One CPU credit equals one vCPU running at 100% utilization for one minute or an equivalent combination of vCPUs, utilization, and time.",
            "background_color":"blue",
            "font_size":"14",
            "text_align":"left",
            "show_tick":true,
            "tick_pos":"50%",
            "tick_edge":"bottom"
         },
         "layout":{
            "x":73,
            "y":13,
            "width":35,
            "height":9
         }
      }
   ],
   "template_variables":[
      {
         "name":"AWS_account",
         "default":"*",
         "prefix":"aws_account"
      }
   ],
   "layout_type":"free",
   "is_read_only":false,
   "notify_list":[
      "boyan.syarov@datadoghq.com"
   ],
   "id":"qay-kbs-bnf"
}
